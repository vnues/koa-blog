# 为什么需要日志

当用户使用发生错误时候，我们需要记录这个日志 这样才能快速定位bug，所以日志要好好写


https://zhuanlan.zhihu.com/p/27363484

1. 什么是日志
日志用来记录用户操作、系统运行状态等，是一个系统的重要组成部分。然而，由于日志通常不属于系统的核心功能，所以常常不被团队成员所重视。对于一些简单的小程序，可能并不需要在如何记录日志的问题上花费太多精力。但是对于作为基础平台为很多产品提供服务的后端程序，就必须要考虑如何依靠良好的日志来保证系统可靠的运行了。

好的日志可以帮助系统的开发和运维人员：

了解线上系统的运行状态
快速准确定位线上问题
发现系统瓶颈
预警系统潜在风险
挖掘产品最大价值


输出日志时要考虑日志的使用者，例如如果日志主要由系统的运维人员来看，那就不能输出：

[INFO] RequestID:b1946ac92492d2347c6235b4d2611184, ErrorCode:1426 
至少应该是：

[INFO] RequestID:b1946ac92492d2347c6235b4d2611184, ErrorCode:1426, Message: callback r......



对文中提出的所有建议总结如下：

充分认识到日志对于一个可靠的后端系统的关键作用
整个团队（包括运维人员）需要对日志级别有明确的规定，什么日志输出为什么级别，什么级别的错误出现要如何处理等
需要定期对日志内容进行优化更新，目的就是通过日志快速准确地定位问题
要明确不同日志的用途，对日志内容进行分类
绝不要打印没有用的日志，防止无用日志淹没重要信息
日志信息要准确全面，努力做到仅凭日志就可以定位问题
日志的优化是一件需要持续不断投入精力的事，需要不断从错误中学习
根据不同的目的生成RequestID，必要时在RequestID中尽量编码更多的信息
将一个请求的整个处理流程和唯一的RequestID关联起来
支持动态日志输出，方便线上问题定位
新上线服务器后一定要对日志进行观察，特别地，开发人员可以通过观察日志来确认新功能是否工作正常
通过日志级别的提升来发现潜在问题
对日志进行监控报警，比客户先发现系统问题
通过日志中的关键字来确定系统的运行状态
日志格式要统一规范
将错误日志输出到一个单独的文件中进行分析
要把日志的大小，如何切分，如何删除等作为规范建立起来